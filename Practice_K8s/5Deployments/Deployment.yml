---
apiVersion: v1
kind: Deployment
metadata: 
 name: jenkins-deployment
spec:
 minReadySeconds: 5
 replicas: 2
 selector:
  matchLabels:
   app: jenkins
 strategy:
  type: RollingUpdate
  rollingUpdate:
   maxSurge: 25%
   maxUnavailable: 25%
 template:
  metadata:
   app: jenkins
   env: learning
  spec:
   containers:
    name: jenkins-pod
    image: jenkins:2.60.3
    ports:
     containerPort: 80
     protocol: TCP
    livenessProbe:
     httpGet:
      path: /
      port: 80
     initialDelaySeconds: 5
     periodSeconds: 10
     successThreshold: 1
     failureThreshold: 1




---
apiVersion: v1
kind: Service
metadata: 
 name: jenkins-service
spec:
 type: NodePort
 selector:
  app: jenkins
 ports:
  protocol: TCP
  port: 8080
  targetPort: 80
  nodePort: 32555